<!DOCTYPE html>
<meta charset="utf-8">

<body>
<!-- <script src="//d3js.org/d3.v3.min.js"></script> -->
<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<link rel="stylesheet" href="style.css">
<script src="app.js"></script>



<!-- <button> Change </button> -->

<!-- <script>
    var xMin = 0;
    var xMax = 50;
    var xStep = 5;
    var numberOfXMarks = (xMax - xMin) / xStep ;

    var teams = [],
    wins = [],
    loses = [];
    d3.csv('2015NCAAData_Full.csv',function(data) {
      data.map(function(d) {
          teams.push(d.Team);
          wins.push(d.Wins);
          loses.push(d.Loses)
          // prevalence.push(d.prevalence);
          // disability.push(d.disability);
      });
      doSomethingWithRows();
    });
    function doSomethingWithRows() {
      console.log(teams);
      console.log(wins);

      var grid = d3.range(numberOfXMarks).map(function(i){
  			return {'x1':0,'y1':0,'x2':0,'y2':625};
  		});

  		var tickVals = grid.map(function(d,i){
  			if(i>0)
        {
          console.log("A %i",i);
          return i*xStep;
        }
  			else if(i===0)
        {
          console.log("B %i",i);
          return "50";
        }
  		});

  		var xscale = d3.scale.linear()
  						.domain([xMin,xMax])
  						.range([0,722]);

  		var yscale = d3.scale.linear()
  						.domain([0,teams.length])
  						.range([0,625]);

  		var colorScale = d3.scale.quantize()
  						.domain([0,teams.length])
  						.range(colors);

  		var canvas = d3.select('#chart')
  						.append('svg')
  						.attr({'width':900,'height':650});

              // svg repositioning
      $("canvas").css({top: 200, left: 500, position:'absolute'});

  		// var grids = canvas.append('g')
  		// 				  .attr('id','grid')
  		// 				  .attr('transform','translate(150,10)')
  		// 				  .selectAll('line')
  		// 				  .data(grid)
  		// 				  .enter()
  		// 				  .append('line')
  		// 				  .attr({'x1':function(d,i){ return i*30; },
  		// 						 'y1':function(d){ return d.y1; },
  		// 						 'x2':function(d,i){ return i*30; },
  		// 						 'y2':function(d){ return d.y2; },
  		// 					})
  		// 				  .style({'stroke':'#adadad','stroke-width':'1px'});

  		var	xAxis = d3.svg.axis();
  			xAxis
  				.orient('bottom')
  				.scale(xscale)
  				.tickValues(tickVals);

  		var	yAxis = d3.svg.axis();
  			yAxis
  				.orient('left')
  				.scale(yscale)
  				.tickSize(1)
  				.tickFormat(function(d,i){
            return teams[i];
          })
  				.tickValues(d3.range(64));

  		var y_xis = canvas.append('g')
  						  .attr("transform", "translate(150,0)")
  						  .attr('id','yaxis')
  						  .call(yAxis);

  		var x_xis = canvas.append('g')
  						  .attr("transform", "translate(150,625)")
  						  .attr('id','xaxis')
  						  .call(xAxis);

  		var chart = canvas.append('g')
  							.attr("transform", "translate(150,0)")
  							.attr('id','bars')
  							.selectAll('rect')
  							.data(wins)
  							.enter()
  							.append('rect')
  							.attr('height',9)
  							.attr({'x':0,'y':function(d,i){
                  if(i > 0)
                  {
                    return yscale(i)+9;
                  }
                  else {
                    return yscale(i)+9;
                  }
                }})
  							.style('fill',function(d,i){ return colorScale(i); })
  							.attr('width',function(d){ return 0; });


  		var transit = d3.select("svg").selectAll("rect")
  						    .data(wins)
  						    .transition()
  						    .duration(2000)
  						    .attr("width", function(d) {return xscale(d); });

  		// var transitext = d3.select('#bars')
  		// 					.selectAll('text')
  		// 					.data(wins)
  		// 					.enter()
  		// 					.append('text')
  		// 					.attr({'x':function(d) {return xscale(d)-200; },'y':function(d,i){ return yscale(i)+35; }})
  		// 					.text(function(d){ return d+"$"; }).style({'fill':'#fff','font-size':'14px'});
    }

		// var teams= ['','Accessories', 'Audiophile', 'Camera & Photo', 'Cell Phones', 'Computers','eBook Readers','Gadgets','GPS & Navigation','Home Audio','Office Electronics','Portable Audio','Portable Video','Security & Surveillance','Service','Television & Video','Car & Vehicle'];

		// var wins = [213,209,190,179,156,209,190,179,213,209,190,179,156,209,190,190];

		var colors = ['#0000b4','#0082ca','#0094ff','#0d4bcf','#0066AE','#074285','#00187B','#285964','#405F83','#416545','#4D7069','#6E9985','#7EBC89','#0283AF','#79BCBF','#99C19E'];
</script> -->
<div id="navbar">
  <div class="selected">Page 1</div>
  <div class="">Page 2</div>
  <div class="">Page 3</div>
</div>

<div class="wrapper">
  <div id="menu" class="group">
    <div class="selected">Wins</div>
    <div class="">Loses</div>
  </div>
  <div id="chart"></div>
</div>
<script>
  var barHeight = 20, width = 450, numPlayers = 64, parameter = 'Wins';
  var data = [], yScale = null;
  var menu = [
    {id: 'Wins', name: 'Wins 1'},
    {id: 'Loses', name: 'Loses 1'}
  ];

  //// UI
  function menuClick(d) {
    if(parameter === d.id)
      return;

    d3.select('#menu').selectAll('div').classed('selected', false);
    d3.select(this).classed('selected', true);

    parameter = d.id;

    updateChart();
  }
  //// HELPER FUNCTIONS
  function px(s) {
    return s + 'px';
  }
  //// D3
  function updateScale() {
    yScale = d3.scale.linear()
      .domain([0, d3.max(data, function(d) { return d[parameter]; })])
      .range([0, width]);
  }
  function updateChart() {
    updateScale();

    d3.select('#chart')
      .selectAll('div.bar')
      .transition()
      .duration(2000)
      .style('width', function(d) {
        return px(yScale(d[parameter]));
      });

    d3.select('#chart')
      .selectAll('div.value')
      .transition()
      .duration(2000)
      .tween("text", function(d) {
        // Thanks to http://stackoverflow.com/questions/13454993/increment-svg-text-with-transistion
        var i = d3.interpolate(this.textContent, d[parameter]);
        return function(t) {
            this.textContent = Math.round(i(t));
        };
      });
  }

  d3.csv('2015NCAAData_Full.csv', function(err, csv) {
    data = csv;//filterPlayers(csv);

    updateScale();

    var players = d3.select('#chart')
      .selectAll('div')
      .data(data)
      .enter()
      .append('div')
      .sort(function(a, b) {return d3.descending(a[parameter], b[parameter]);})
      .classed('player', true)
      .style('top', function(d, i) {
        return px(i * barHeight);
      });

    players.append('div')
      .classed('label', true)
      .text(function(d) {return d.Team;});

    players.append('div')
      .classed('bar', true)
      .style('height', px(barHeight * 0.95))
      .style('width', function(d) {
        return px(yScale(d[parameter]));
      });

    players.append('div')
      .classed('value', true)
      .text(function(d) {return (d[parameter]);});

    // Menu
    d3.select('#menu')
      .selectAll('div')
      .data(menu)
      // .enter()
      .append('div')
      .text(function(d) {return d.name;})
      .classed('selected', function(d, i) {return i==0;})
      .on('click',menuClick);
  });
</script>
</body>
